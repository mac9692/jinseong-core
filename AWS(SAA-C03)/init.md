# AWS Certified Solutions Architect STUDY GUIDE 4/E
## 용어
```
Elastic : 탄력있는, 신축성이 있는
프로비저닝(Provisioning) : 조항, 규정
워크로드 : 작업을 완료하거나 성과를 창출하는 데 소요되는 컴퓨팅 리소스와 시간의 양을 의미합니다.
컴퓨터에서 실행되는 모든 애플리케이션 또는 프로그램은 워크로드로 간주할 수 있습니다.
온디맨드 : 요구사항에 따라 즉시 제공/공급하는 방식을 뜻합니다.
수요에 초점을 맞춘 서비스로 소비자가 원하면 언제든지 제공할 수 있다는 점이 포인트이다.
```
## AWS 클라우드
```
AWS 는 늘 혁신을 거듭하고 새로운 서비스를 추가하고 있으므로 최신의 AWS 서비스를 지속적으로 파악하고 활용하는 일은 결코 쉬운 일이 아니다.
하지만 솔루션 아키텍트라면 핵심적인 AWS 서비스를 잘 파악하고 있어야 한다.

AWS 서비스 카테고리
1. 컴퓨트
전통적인 물리적 서버를 클라우드에 복제한 개념의 서비스이다.
오토스케일링, 로드밸런싱, 서버리스 아키텍처(매우 작은 리소스만 소모하는 서버 기능 활용 방식) 와 같은 고급 환경설정 기능을 제공한다.
  1) Elastic Compute Cloud(EC2)
  2) Lambda
  3) Auto Scailing
  4) Elastic Load Balancer
  5) Elastic Container Service
  6) Elastic Beanstalk

2. 네트워킹
애플리케이션 연결성, 액세스 컨트롤, 강화된 원격 연결성을 제공한다.
  1) Virtual Private Cloud(VPC)
  2) Direct Connect
  3) Route 53

3. 스토리지
다양한 객체 저장 목적에 활용될 수 있으며, 즉각적인 접근성 및 장기적인 백업 기능을 제공하는 스토리지 플랫폼이다.
  1) CloudFront

4. 데이터베이스
관계형, NoSQL, 캐싱 등 다양한 데이터 포맷을 지원하는 관리형 데이터 솔루션이다.
5. 애플리케이션 관리
AWS 리소스에 대한 모니터링, 감사, 환경설정 기능을 제공한다.
6. 보안 및 권한 증명
권한 인증, 권한 부여, 데이터 및 연결 암호화, 서드 파티 인증 관리 시스템과의 통합 기능을 제공한다.
```

## AWS의 신뢰성 및 서비스 규약, 공유 책임 모델
```
AWS는 사용자가 계정을 생성한 직후부터 새 인스턴스를 생성하기까지 정말로 많은 기본 규약과 지침, 보안 규정을 제시한다.
AWS는 글로벌 클라우드 서비스를 제공하기 위해, 인프라 어드민과 관련된 리소스 개발 및 전문성 확보에 엄청난 양의 인적, 물적 투자를 해왔으며,
데이터 센터 보안, 반복 구현 레이어, 위법한 복제를 방지하기 위해 검증된 프로토콜 구현 등 다양한 어드민 지원 체계를 확보하고 개선해 왔다.

AWS 공유책임모델
모든 안전장치 및 편의성 요소는 모두 AWS 플랫폼에서 제공한다.
하지만 AWS에 업로드한 데이터, AWS에서 구현한 애플리케이션은 사용자와 아키텍처의 비즈니스 자산이며 결과적으로 책임을 져야할 자원이다.
따라서 사용자라면 누구라도 공유책임모델을 명확하게 이해할 필요가 있다.
AWS는 물리적 서버, 스토리지, 네트워킹 인프라, 각종 관리형 서비스에 대해 책임이 있다.
반면 고객은 클라우드 안에 있는 것에 대해 책임을 진다.
즉, 사용자가 설치한 운영 체제에 대한 보안 및 운영, 클라이언트 측 데이터, 네트워크에서 유입 및 유출되는 데이터,
사용자 인증 및 접근 권한 부여, 고객 데이터 관리에 대한 책임이 있다.
```

## 클라우드 컴퓨팅과 가상화
```
모든 클라우드 컴퓨팅 서비스의 핵심 기술은 가상화에 기반한다.
가상화란 하나의 물리적 서버 형태로 존재하는 하드웨어 리소스를 여러 개의 작은 유닛으로 나누는 것이다.
가상의 작은 유닛으로 분할된 물리적 서버는 자체 운영체제와 함께, 메모리, 스토리지, 네트워크를 할당 받은 가상 머신이 되어 완벽하게 작동할 수 있게 된다.
가상화 기술은 사용자가 가상 서버를 불과 수 초만에 배포하고, 프로젝트 요구사항에 맞춰 실행한 뒤, 즉시 삭제할 수 있을 정도로 높은 유연성을 제공한다.
가상화된 리소스의 사용 밀도를 높여서 하드웨어의 성능 및 가치를 최대치로 이끌어 낼 수 있으며,
상용화 테스트 환경 및 실험 환경을 쉽게 만들 수 있다.
```
## 클라우드 컴퓨팅 아키텍처
```
AWS와 같은 주요 클라우드 서비스 제공사는 수십만 대의 서버, 디스크 드라이버를 네트워크 케이블로 연결한 방대한 규모의 서버 팜을 운영한다.
잘 정비된 가상환경은 스토리지, 메모리, 컴퓨트 사이클을 이용한 가상 서버를 제공하고 활용 가능 리소스의 최적 이용이 가능하도록 네트워크 서비스를 제공한다.
클라우드 플랫폼에서 사용자는 워크로드 처리를 위해 온디맨드 및 셀프서비스 기반의 컴퓨트 리소스 풀에 접속하며,
이에 따른 사용 내역은 정확하게 측정어 사용량에 따라 과금된다.
```
## 클라우드 컴퓨팅 최적화
```
클라우드는 확장성 및 탄력성을 지니고 있으며, 전통적인 시스템에 비해 훨씬 낮은 비용이 소요되므로 변동성 높은 워크로드 처리를 위한 탁월한 선택이 될 수 있다.
사용자는 효과적인 클라우드 리소스 배포를 위해 이들 세 가지 속성에 대한 감각 또는 인사이트를 지니고 있어야 한다.

확장성
인프라의 확장성이 높다는 의미는 사용자의 애플리케이션에 예측하지 못한 트래픽이 몰렸을 때,
이를 해소하기 위한 리소스를 자동으로 추가할 수 있다는 것이다.
요구되는 처리 용량의 증가에 맞춰 가상머신(인스턴스)의 수를 동적으로 증가시킨다.
AWS는 사전 정의된 요구 수준에 맞춰서 필요한 즉시 자동으로 머신 이미지를 복제해서 론칭할 수 있는 오토스케일링 서비스를 제공한다.

탄력성
탄력성 또한 확장성과 같은 문제를 다룬다.
허나 다른 부분은 확장성은 수요 증가에 따라 리소스를 증대시키는 개념이라면,
탄력성은 수요 감소에 따라 리소스를 감소시키는 개념을 포함하고 있다는 것이다.
이를 통해 사용자는 꼭 필요할 때만 리소스를 실행하면 되므로 클라우드 비용을 효과적으로 통제할 수 있다.

비용관리
클라우드 컴퓨팅은 IT 인프라 도입 및 운영을 기존의 자본 비용 관점에서 운영 비용 관점으로 변화시킨다.
전산 업무 개념에서 설명하면 클라우드 컴퓨팅 환경에서는 새 서버 한 대를 도입하는데
자본적 지출에 해당하는 고정비, 전기료, 냉각장치비, 보안 유지비, 서버 공간 비용 등을 지불할 필요가 없다는 것이다.
대신 사용자는 자신이 실행하는 애플리케이션 실행과 관련된 훨씬 적은 수준의 운영 비용만 지불하면 된다.
사용자는 변화하는 수요에 대응하기 위해 클라우드를 통해 좀 더 간단하게 배포하는 리소스 용량을 늘이거나 줄일 수 있게 됐다.
예를 들어 커머스 비즈니스의 경우, 수요 급증 기간 동안에는 리소스를 추가로 배포하고 수요가 감소하면 자동으로 리소스를 줄일 수 있다.

물론 클라우드 기반의 총 운영 비용이 전통적인 데이터 센터 구축 및 운영 비용보다 반드시 낮다는 것은 아니다.
하지만 사용자가 불필요한 자본적 지출의 리스크를 줄일 수 있는 것은 분명하다.
신규 사업을 위해 IT 인프라에 대규모 투자를 했지만 수요 감소로 해당 사업에서 철수해야 할 수도 있고,
도입 당시엔 최신의 기술이었지만 기술 트렌드의 급격한 변화로 불과 수년 내에 서버를 교체하거나 업그레이드해야 하는 리스크가 존재하는 것이다.
```

## EC2
```
Classic Port
22: SSH = 리눅스 인스턴스 로그인용
21: FTP = 파일 업로드용
22: SFTP = SSH 를 이용한 파일 업로드용
80: HTTP = 보안없는 웹사이트 접근용
443: HTTPS = 보안 웹사이트 접근용
3389: RDP(Remote Desktop Protocol) = 윈도우 인스턴스 로그인용

구매 옵션
1. On-Demand : 짧은 워크로드나 중단없는 워크로드에 알맞다. 비용을 예측해서 1초 당 비용을 지불하면 된다.
윈도우즈나 리눅스는 1분 이후에 초 단위로 청구, 다른 OS 는 1시간 단위로 청구된다.
비용이 가장 많이 들지만 바로 지불할 금액이 없고, 장기적인 약정도 필요없다.
따라서 짧은 워크로드나 중단없는 워크로드가 필요할 때, 또는 애플리케이션의 거동을 예측할 수 없을 때 사용된다.

2. 예약형 (기간은 1년 또는 3년 - 선결제 없음, 부분 선결제, 전부 선결제 가능) : 장기간 워크로드에 알맞다. (DB 실행용 인스턴스)
온 디맨드에 비해 최대 72% 저렴한 가격 제공, 특정한 인스턴스 속성을 예약(인스턴스 타입, 리전, 테넌시, OS 등)
마켓 플레이스에서 사고, 팔기 가능
++ 전환형 예약 : 예약형 이었다가 시간이 지나면 타입 변경 가능. 유연성이 크기 때문에 할인율은 떨어짐 최대 66%
곧 사라질 수도 있다.(절약형 플랜이 더 유용하기 때문이다. 절약형 플랜을 권장한다.)


4. 절약 플랜 (기간은 1년 또는 3년) : 특정 타입을 정해서 사용하는 것이 아닌, 달러 단위로 특정한 사용량을 약정하는 현대적인 방법.
장기간 사용하면 할인 받음. 최대 72% 할인 대신 다음 1년 ~ 3년 간 시간당 10달러 약정해야 함.
사용량이 한도를 넘어서면 절약 플랜은 온디맨드 가격으로 청구 됨.
특정한 패밀리와 리전으로 고정 됨 대신 사이즈는 변경 가능.

5. 스팟형 : 아주 짧은 워크로드에 알맞다. 하지만 언제라도 인스턴스를 손실될 수 있어 신뢰성이 낮다.
할인 폭이 가장 크다. 최대 90% 할인.. 하지만 최대 가격을 설정하고 진행하고, 인스턴스의 시가가 그걸 넘어서면 인스턴스가 손실될 수 있다. 약간 경매 느낌.
가격이 넘어서면 2분 간의 유예 기간이 주어지고, 두 가지 일 중 하나를 할 수 있다.
인스턴스 중지 혹은 종료이다.
인스턴스가 중지는 인스턴스가 중지되고 어느 날 스팟 가격이 최대 가격 아래로 내려가게 되면 다시 시작한다.
따라서 AWS에서 가장 비효율적인 인스턴스 하지만 고장에 대한 회복력이 있다면 아주 유용할 것이다.

스팟 인스턴스 무리의 전략 :
1) 최저 가격
2) 다양한 방법
3) 용량 최적화
4) 가격 용량 최적화

6. 전용 호스트 (Dedicated Hosts) : 물리적인 서버 전체를 예약해서 인스턴스 배치를 제어할 수 있다.
AWS 에서 가장 비싼 옵션이다. 실제 물리적인 서버를 받게 된다.
온디맨드와 같은 가격이다.
초당 비용 지불 혹은 1년 ~ 3년 예약 사용 가능. 예약 시에 70%까지 할인된다.
라이센싱 모델과 함께 제공되는 소프트웨어인 경우의 사례 BYOL(Bring Your Own License) 인 경우

7. 전용 인스턴스 (Dedicated Instances) : 다른 고객이 사용자의 하드웨어를 공유하지 않는다.
사용자의 전용 하드웨어에서 실행되는 인스턴스이다. 물리적 서버와는 다르다.

8. 용량 예약 : 원하는 기간 동안 특정한 AZ에 용량을 예약할 수 있다.
기간 약정이 없기 때문에 원하는 때에 용량을 예약하고 취소할 수 있다.
청구 할인도 없다. 오직 예약하기 위한 목적으로 사용된다. 온디맨드 가격이다.
지역별 예약 인스턴스와 결합하거나 절약 플랜과 결합하면 청구 할인을 받을 수 있다.
인스턴스 실행 여부와 상관없이 온디맨드 요금이 부과된다.
```

## AWS 서비스
```
AWS Config : 규정을 설정하고, 규정 위반 발견 시 트리거하는 서비스.
Lambda : 서버리스로 함수를 실행할 수 있는 서비스.
CloudFront : 사용자의 요청과 응답(Viewer Request, Response) 을 수정하는데 사용하는 서비스. 고성능, 고확장성이 필요할 때, 사용자의 요청과 응답 수정에만 사용된다.
ex) CDN
Cognito : 외부의 웹과 모바일 앱 사용자에게 자격, 권한 및 인증을 부여하는 서비스.
RDS :
RDS Proxy : VPC 내의 RDS에 람다가 접근하다 보면, 수 많은 연결이 필요하다. 이 때 RDS 앞에서 람다의 요청을 모두 받고 풀링해주는 역할을 한다.
DynamoDB : AWS 네이티브 기술, NoSQL DB, 트랜잭션 지원, 다중 AZ 복제 기능, 큰 객체를 저장할 때는 적합하지 않다.
데이터의 유형과 구성 면에서 스키마를 빠르게 전개해야 할 때 사용하면 좋다.
DynamoDB Accelerator(DAX) : DynamoDB 캐시 메모리로, 마이크로 초의 처리속도를 보여주는 서비스.
Amazon Elastic Container Service(ECS) : Container용 클러스터를 관리하는 서비스.
Amazon Elastic Kubernetes Service(EKS) : Docker 로 컨테이너화한 애플리케이션을 관리하는 오픈소스 쿠버네티스 클러스터를 관리하는 서비스.
Amazon Elastic Fargate : 서버리스로 Container 를 관리하는 서비스.
Amazon Elastic Container Registry(ECR) : AWS 에 도커 이미지를 저장하고 관리하는 서비스.
AWS AppRunner : 사용자가 아무것도 몰라도 소스코드나 컨테이너 이미지만 가지고 앱을 배포하고 관리할 수 있는 서비스. 빠른 운영 배포 시 사용.

AWS Organizations : 다수의 AWS 계정을 동시에 관리할 수 있는 서비스. 관리 계정으로 조직에 속해있는 모든 계정의 비용을 지불 가능.
Service Control Policies(SCP) 를 사용해서 OU에 속해있는 계정들의 권한을 관리함.
AWS IAM Identity Center(이전 AWS Single-sign-on) : AWS 조직이나 모든 계정에서 single-sign-on 가능.
즉, 한 번의 로그인만으로 salesforce, Box, Microsoft365, EC2 Windows 등과 연결 가능하다.
AWS Managed Microsoft AD(Active Directory) : Windows On-premise AD 와 소통하여 각자의 사용자를 인증한다. 양측에서 관리 가능.
AD Connector : On-premise AD 에 프록시하여 사용자 정보를 확인한다. On-premise AD 에서만 사용자 관리 가능.
Simple AD : AD 가 필요한 경우 단순히 사용한다. On-premise AD 는 관련도 없다.
AWS Control Tower : 모범 사례를 기반으로 안전하고 규정을 준수하는 다중 계정 AWS 환경을 손쉽게 설정하고 관리하는 서비스.

CloudFormation : 코드형 인프라 기반 인프라 배포 서비스. 인프라 구조를 다이어그램으로 확인할 수도 있다.
Amazon Simple Email Service(SES) : 이메일을 전세계로 안전하게 전송하는 서비스.
Amazon PinPoint : 확장 가능한 양방향 인바운드 및 아웃바운드 마케팅 커뮤니케이션 서비스.
SNS, SES 는 각 메시지의 대상, 내용, 전달 일정을 관리해야 하지만, PinPoint 는 서비스로 관리 가능하다.
따라서 완벽한 마케팅 서비스를 이용하려면 SAS 및 SES 의 차세대 제품인 PinPoint를 사용해야 한다.
SSM SessionManager : 인스턴스에 액세스하는 서비스. 적용하면 인스턴스의 22번 포트(SSH 전용) 를 열어 둘 필요가 사라진다.
SSM SessionManager 보안 셸로 SSH 보안 키나 SSH 액세스 없이 접근하면 되기 때문이다.
Cost Explorer : AWS 비용 및 시간에 따른 사용량을 시각화하고 관리하는 청구 서비스.
Amazon Elastic Transcoder : 미디어 파일을 변환해주는 서비스. 변환해준 시간만큼 청구된다.
AWS Batch : 시작시간과 종료시간이 정해져있는 배치 작업을 수행하기 위해 EC2 인스턴스를 동적으로 생성한다.
장점은 배치 작업에 필요한 EC2 인스턴스 또는 스팟 인스턴스의 적절한 수를 자동으로 조절해주기 때문이다.
람다와 배치의 차이 람다는 15분의 작업 제한 시간과 임시 디스크 공간 제한이 있는 서버리스 서비스이다.
배치는 인스턴스에 의존하기 때문에 시간 제한이 없다. 스토리지도 인스턴스와 함께 제공되는 EBS 볼륨이나 인스턴스 스토어를 사용할 수 있다.
Amazon Appflow : SaaS 와 AWS 사이에 데이터를 전송할 수 있는 완전 관리형 통합 서비스.
AWS Amplify(증폭) : 웹 및 모바일 앱 개발 도구 서비스(AWS 서비스 모음집).
```

## Amazon Serverless 서비스
```
서버리스 개념 : 서버가 존재하지 않는다는 것 뿐만 아니라, 해당 서비스의 관리에 관하여 일체 신경쓰지 않는 경우도 서버리스이다.

AWS Lambda
DynamoDB
AWS Cognito
AWS API Gateway
Amazon S3
AWS SNS & SQS
AWS Kinesis Data Firehose
Aurora Serverless
Step Function
Fargate
```

## Best Practices
```
1. IAM
1) 루트 계정은 AWS 계정을 설정할 때 제외하고는 사용하지 않는다.
2) 하나의 AWS 사용자는 실제 한 명의 AWS 사용자이다. 그렇기 때문에 계정이 필요할 때는 공유하지 말고 생성하라.
3) 사용자를 권한 그룹에 포함하여 권한을 허용하거나 제한할 수 있다.
4) 강력한 비밀번호 정책을 사용하라.
5) 다중요소인증(MFA)을 사용하라.
6) AWS에 권한을 부여할 때마다 Role을 만들고 사용하라.
7) AWS 개발키트나 CLI 사용 시 반드시 액세스 키를 만들어야 하고, 이는 비밀번호와 같습니다.
8) 계정의 권한을 감사할 때는, IAM 자격 증명 보고서와 액세스 분석기를 사용할 수 있다.
9) 절대로 IAM 사용자와 액세스 키를 공유하지 마라.
```
